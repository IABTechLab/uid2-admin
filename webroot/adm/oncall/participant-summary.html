<html>

<head>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <link href="../../css/participantSummary.css" rel="stylesheet" />
</head>

<body>
<div class="container-lg">
    <div class="col-lg">
        <div class="row">
            <h1>UID2 Env - On-call - Participant Summary</h1>
        </div>
        <div class="row pt-3 pb-2">
            <div class="col-sm">
                <a href="/">Back</a>
            </div>
        </div>
        <div class="row py-3">
            <div class="card card-body">
                <div class="row py-1">
                    <div class="col">
                        <h5>Search</h5>
                    </div>
                    <div class="align-items-end">
                        <div class="col">
                            <div class="form-group">
                                <label for="key">Site Id or Name:</label>
                                <input type="text" class="form-control" id="key">
                                <pre class="errorDiv" id="siteSearchErrorOutput"></pre>
                            </div>
                        </div>
                        <div class="col">
                            <a href="#" class="btn btn-primary" id="doSearch">Search</a>
                        </div>
                    </div>
                </div>
                <div class="row pt-3">
                    <div class="col section">
                        <h5>Search Results:</h5>
                    </div>
                </div>
                <div class="row px-2">
                    <div class="col section">
                        <h5>Site Information</h5>
                        <pre class="errorDiv" id="siteErrorOutput"></pre>
                        <pre id="siteStandardOutput"></pre>
                    </div>
                    <div class="col section" id="divSiteDomainsAndApps">
                        <div>
                            <h5>Site Domain Names</h5>
                            <pre id="domainNamesStandardOutput"></pre>
                        </div>
                        <div>
                            <h5>Site App Names</h5>
                            <pre id="appNamesStandardOutput"></pre>
                        </div>
                    </div>
                </div>
                <div class="row px-2">
                    <div class="col section">
                        <h5>Participant API Keys</h5>
                        <pre class="errorDiv" id="participantKeysErrorOutput"></pre>
                        <pre id="participantKeysStandardOutput"></pre>
                    </div>
                    <div class="col section">
                        <h5>Participant Encryption Keys</h5>
                        <pre class="errorDiv" id="encryptionKeysErrorOutput"></pre>
                        <pre id="encryptionKeysStandardOutput"></pre>
                    </div>
                </div>
                <div class="row px-2">
                    <div class="col section">
                        <h5>Participant Operator Keys</h5>
                        <pre class="errorDiv" id="operatorKeysErrorOutput"></pre>
                        <pre id="operatorKeysStandardOutput"></pre>
                    </div>
                    <div class="col section">
                        <h5>Participant Opt-out Webhook</h5>
                        <pre class="errorDiv" id="webhooksErrorOutput"></pre>
                        <pre id="webhooksStandardOutput"></pre>
                    </div>
                </div>
                <div class="row px-2">
                    <div class="col section">
                        <h5>Participant Related Keysets</h5>
                        <div><b>A keyset is related to the participant if it matches below criteria:</b><br>
                            a. Keysets where allowed_types include any of the clientTypes of the site<br>
                            b. If this participant has a client key with ID_READER role, we want to rotate all the keysets where allowed_sites is set to null<br>
                            c. Keysets where allowed_sites include the leaked site<br>
                            d. Keysets belonging to the leaked site itself<br></div>
                        <pre class="errorDiv" id="relatedKeysetsErrorOutput"></pre>
                        <pre id="relatedKeysetsStandardOutput"></pre>

                        <div class="col">
                            <a href="#" class="btn btn-primary" id="doRotateKeysets">Rotate Keysets</a>
                            <div>Note: Once rotated, the participant will need to get a new refresh key to be able to decrypt data.</div>
                            <div id="output">
                                <pre id="errorOutput"></pre>
                                <pre id="standardOutput"></pre>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

    </div>
</div>
<script src="../../js/main.js"></script>
<script src="../../js/participantSummary.js"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>

</body>

</html>